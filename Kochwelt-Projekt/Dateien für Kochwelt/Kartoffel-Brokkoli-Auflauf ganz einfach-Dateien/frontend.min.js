function debugEcho(e){let t;new URLSearchParams(window.location.search).has("wp_engage_debug")&&console.log("[WP ENGAGE]: "+e)}jQuery(document).ready((function(e){var t=js_vars.api_url,s=js_vars.sr>1?js_vars.sr:1,i=[],o=[],n=!1,d=!1;if(window.screen.width>500)var c="desktop";else var c="mobile";var r=!1;js_vars.waitForConsent&&(r=!0),debugEcho("Waiting for Consent? "+r),r&&__tcfapi("addEventListener",2,(function(e,t){!t||"useractioncomplete"!==e.eventStatus&&"tcloaded"!==e.eventStatus||(r=!1,debugEcho("Consent received"))})),debugEcho("zufallszahl: "+Math.random()),debugEcho("sampling rate: "+s);var a=!(Math.random()>1/s);if(debugEcho("active? "+a),a&&!r){function p(i){debugEcho("PI"),e.ajax({url:t,type:"post",data:{post_id:js_vars.postID,device_type:i,page_impressions:1*s},success:function(e){debugEcho(e)},error:function(e){debugEcho(e)}})}function u(i){debugEcho("Active PI: ID: "+js_vars.postID+", device_type: "+i+", active PIs: "+1*s),e.ajax({url:t,type:"post",data:{post_id:js_vars.postID,device_type:i,active_page_impressions:1*s},success:function(e){debugEcho("MW Response: "+e)},error:function(e){debugEcho("MW Error Response: "+e)}})}function g(i,o){debugEcho("Widget Impression: ID: "+js_vars.postID+", device_type: "+i+", widget_id: "+o+", widget impressions: "+1*s),e.ajax({url:t,type:"post",data:{post_id:js_vars.postID,device_type:i,widget_id:o,widget_impressions:1*s},success:function(e){debugEcho("MW Response: "+e)},error:function(e){debugEcho("MW Error Response: "+e)}})}function _(i,o,n){debugEcho("Element Impression: ID: "+js_vars.postID+", target_post_id :"+n+", device_type: "+i+", widget_id: "+o+", element_impressions: "+1*s),e.ajax({url:t,type:"post",data:{post_id:js_vars.postID,target_post_id:n,device_type:i,widget_id:o,element_impressions:1*s},success:function(e){debugEcho("MW Response: "+e)},error:function(e){debugEcho("MW Error Response: "+e)}})}function h(i,o,n){debugEcho("Element Click: ID: "+js_vars.postID+", post_id: "+js_vars.postID+", target_post_id :"+n+", device_type: "+i+", widget_id: "+o+", element_clicks: "+1*s),e.ajax({url:t,type:"post",data:{post_id:js_vars.postID,target_post_id:n,device_type:i,widget_id:o,element_clicks:1*s},success:function(e){debugEcho("MW Response: "+e)},error:function(e){debugEcho("MW Error Response: "+e)}})}e(window).on("scroll",(function(){n||(u(c),n=!0),e(".wp-engage-widget-element").each((function(){var t=e(this).data("recommendation-id");e(this).isInViewport()&&(thisWidgetID=e(this).closest(".wp-engage-block").data("widget-id"),!0!==i[thisWidgetID]&&(i[thisWidgetID]=!0,g(c,thisWidgetID)),!0!==o[thisWidgetID+"-"+t]&&(o[thisWidgetID+"-"+t]=!0,_(c,thisWidgetID,t)))}))})),e(window).on("click",(function(){n||(u(c),n=!0)})),e(document).ready((function(){e(".wp-engage-widget-element").click((function(){h(c,e(this).closest(".wp-engage-block").data("widget-id"),e(this).data("recommendation-id"))}))})),e.fn.isInViewport=function(){var t=e(this).offset().top,s=t+e(this).outerHeight(),i=e(window).scrollTop(),o=i+e(window).height();return s>i&&t<o}}}));